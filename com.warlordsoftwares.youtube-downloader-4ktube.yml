app-id: com.warlordsoftwares.youtube-downloader-4ktube
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk
command: 4ktube.sh

tags:
  - proprietary
  - dev-test

finish-args:
  - --share=network
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --filesystem=xdg-download
  - --filesystem=xdg-documents
  - --filesystem=xdg-run/gvfsd
  - --device=dri
  - --socket=pulseaudio

modules:
  - name: youtube-downloader-4ktube
    buildsystem: simple
    build-commands:
      - mkdir -p ${FLATPAK_DEST}/4ktube
      - cp -r * ${FLATPAK_DEST}/4ktube
      - install -Dm755 ${FLATPAK_DEST}/4ktube/4KTUBE ${FLATPAK_DEST}/bin/4KTUBE
      - install -Dm755 ${FLATPAK_DEST}/4ktube/4ktube.sh ${FLATPAK_DEST}/bin/4ktube.sh
      - install -Dm644 ${FLATPAK_DEST}/4ktube/share/icons/icon.png ${FLATPAK_DEST}/share/icons/hicolor/512x512/apps/com.warlordsoftwares.youtube-downloader-4ktube.png
      - install -Dm644 ${FLATPAK_DEST}/4ktube/share/applications/youtube-downloader-4ktube.desktop ${FLATPAK_DEST}/share/applications/com.warlordsoftwares.youtube-downloader-4ktube.desktop
      - desktop-file-edit --set-icon=${FLATPAK_ID} ${FLATPAK_DEST}/share/applications/com.warlordsoftwares.youtube-downloader-4ktube.desktop
      - install -Dm644 ${FLATPAK_DEST}/4ktube/share/metainfo/com.warlordsoftwares.youtube-downloader-4ktube.metainfo.xml ${FLATPAK_DEST}/share/metainfo/com.warlordsoftwares.youtube-downloader-4ktube.metainfo.xml
    sources:
      - type: archive
        url: https://warlordsoftwares.com/static/app_builds/flatpak/4KTUBE_FLATPAK_TEST.tar.gz
        sha256: 66e85c5014d456076be14edf1089840535052ffc4c329bebedc1f15e2a55e603
